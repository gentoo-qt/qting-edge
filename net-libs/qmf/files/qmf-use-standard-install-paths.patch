diff -Naur qmf-9999.orig/benchmarks/tst_messageserver/tst_messageserver.pro qmf-9999/benchmarks/tst_messageserver/tst_messageserver.pro
--- qmf-9999.orig/benchmarks/tst_messageserver/tst_messageserver.pro	2011-08-15 02:24:01.801755679 +0200
+++ qmf-9999/benchmarks/tst_messageserver/tst_messageserver.pro	2011-08-15 02:24:14.857592458 +0200
@@ -3,7 +3,7 @@
 CONFIG += qmfmessageserver qmfclient
 
 TARGET = tst_messageserver 
-target.path += $$QMF_INSTALL_ROOT/tests
+target.path += $$[QT_INSTALL_DATA]/tests
 
 BASE=../../
 include($$BASE/common.pri)
diff -Naur qmf-9999.orig/examples/listfilterplugin/listfilterplugin.pro qmf-9999/examples/listfilterplugin/listfilterplugin.pro
--- qmf-9999.orig/examples/listfilterplugin/listfilterplugin.pro	2011-08-15 02:24:01.894754515 +0200
+++ qmf-9999/examples/listfilterplugin/listfilterplugin.pro	2011-08-15 02:24:14.860592422 +0200
@@ -3,7 +3,7 @@
 CONFIG += qmfclient plugin
 QT = core
 
-target.path += $$QMF_INSTALL_ROOT/plugins/contentmanagers
+target.path += $$[QT_INSTALL_PLUGINS]/contentmanagers
 
 DEFINES += PLUGIN_INTERNAL
 
diff -Naur qmf-9999.orig/examples/messagingaccounts/messagingaccounts.pro qmf-9999/examples/messagingaccounts/messagingaccounts.pro
--- qmf-9999.orig/examples/messagingaccounts/messagingaccounts.pro	2011-08-15 02:24:01.974753516 +0200
+++ qmf-9999/examples/messagingaccounts/messagingaccounts.pro	2011-08-15 02:24:14.861592409 +0200
@@ -1,6 +1,6 @@
 TEMPLATE = app
 TARGET = messagingaccounts
-target.path += $$QMF_INSTALL_ROOT/bin
+target.path += $$[QT_INSTALL_BINS]
 CONFIG += qmfclient qmfmessageserver
 
 DEPENDPATH += .
diff -Naur qmf-9999.orig/examples/qtmail/app/app.pro qmf-9999/examples/qtmail/app/app.pro
--- qmf-9999.orig/examples/qtmail/app/app.pro	2011-08-15 02:24:01.952753791 +0200
+++ qmf-9999/examples/qtmail/app/app.pro	2011-08-15 02:24:14.862592396 +0200
@@ -1,7 +1,7 @@
 TEMPLATE = app
 TARGET = qtmail 
 CONFIG += qmfutil qmfclient qmfmessageserver
-target.path += $$QMF_INSTALL_ROOT/bin
+target.path += $$[QT_INSTALL_BINS]
 
 DEPENDPATH += . 
 
diff -Naur qmf-9999.orig/examples/qtmail/libs/qmfutil/qmfutil.pro qmf-9999/examples/qtmail/libs/qmfutil/qmfutil.pro
--- qmf-9999.orig/examples/qtmail/libs/qmfutil/qmfutil.pro	2011-08-15 02:24:01.970753565 +0200
+++ qmf-9999/examples/qtmail/libs/qmfutil/qmfutil.pro	2011-08-15 02:24:14.862592396 +0200
@@ -3,7 +3,7 @@
 CONFIG += qmfclient
 TARGET = qmfutil 
 
-target.path += $$QMF_INSTALL_ROOT/lib
+target.path += $$[QT_INSTALL_LIBS]
 
 DEFINES += QMFUTIL_INTERNAL
 
diff -Naur qmf-9999.orig/examples/qtmail/plugins/composers/email/email.pro qmf-9999/examples/qtmail/plugins/composers/email/email.pro
--- qmf-9999.orig/examples/qtmail/plugins/composers/email/email.pro	2011-08-15 02:24:01.897754479 +0200
+++ qmf-9999/examples/qtmail/plugins/composers/email/email.pro	2011-08-15 02:24:14.863592383 +0200
@@ -2,7 +2,7 @@
 TARGET = emailcomposer 
 CONFIG += qmfclient qmfutil plugin
 
-target.path += $$QMF_INSTALL_ROOT/plugins/composers
+target.path += $$[QT_INSTALL_PLUGINS]/composers
 
 DEFINES += PLUGIN_INTERNAL
 
diff -Naur qmf-9999.orig/examples/qtmail/plugins/viewers/generic/generic.pro qmf-9999/examples/qtmail/plugins/viewers/generic/generic.pro
--- qmf-9999.orig/examples/qtmail/plugins/viewers/generic/generic.pro	2011-08-15 02:24:01.901754428 +0200
+++ qmf-9999/examples/qtmail/plugins/viewers/generic/generic.pro	2011-08-15 02:24:14.864592370 +0200
@@ -2,7 +2,7 @@
 TARGET = genericviewer 
 CONFIG += qmfclient qmfutil plugin
 
-target.path += $$QMF_INSTALL_ROOT/plugins/viewers
+target.path += $$[QT_INSTALL_PLUGINS]/viewers
 
 # Use webkit to render mail if available
 contains(QT_CONFIG,webkit){
diff -Naur qmf-9999.orig/examples/serverobserver/serverobserver.pro qmf-9999/examples/serverobserver/serverobserver.pro
--- qmf-9999.orig/examples/serverobserver/serverobserver.pro	2011-08-15 02:24:01.893754527 +0200
+++ qmf-9999/examples/serverobserver/serverobserver.pro	2011-08-15 02:24:14.865592357 +0200
@@ -1,6 +1,6 @@
 TEMPLATE = app
 TARGET = serverobserver
-target.path += $$QMF_INSTALL_ROOT/bin
+target.path += $$[QT_INSTALL_BINS]
 CONFIG += qmfclient qmfmessageserver
 
 DEPENDPATH += .
diff -Naur qmf-9999.orig/src/libraries/qmfclient/qmfclient.pro qmf-9999/src/libraries/qmfclient/qmfclient.pro
--- qmf-9999.orig/src/libraries/qmfclient/qmfclient.pro	2011-08-15 02:24:01.847755104 +0200
+++ qmf-9999/src/libraries/qmfclient/qmfclient.pro	2011-08-15 02:24:14.866592345 +0200
@@ -4,8 +4,7 @@
 INSTALLS += target
 CONFIG += link_pkgconfig
 
-simulator:macx:target.path += $$QMF_INSTALL_ROOT/Library/Frameworks
-else:target.path += $$QMF_INSTALL_ROOT/lib
+target.path += $$[QT_INSTALL_LIBS]
 
 DEFINES += QT_BUILD_QCOP_LIB QMF_INTERNAL
 win32: {
@@ -221,7 +220,7 @@
                 libqtopiamail-zh_CN.ts \
                 libqtopiamail-zh_TW.ts
 
-header_files.path=$$QMF_INSTALL_ROOT/include/qmfclient
+header_files.path=$$[QT_INSTALL_HEADERS]/qmfclient
 header_files.files=$$PUBLIC_HEADERS
 
 INSTALLS += header_files
@@ -236,7 +235,7 @@
 	CONFIG += create_pc create_prl
 	QMAKE_PKGCONFIG_LIBDIR  = $$target.path
 	QMAKE_PKGCONFIG_INCDIR  = $$header_files.path
-	QMAKE_PKGCONFIG_DESTDIR = pkgconfig
+	QMAKE_PKGCONFIG_DESTDIR = ../pkgconfig
 }
 
 include(../../../common.pri)
diff -Naur qmf-9999.orig/src/libraries/qmfmessageserver/qmfmessageserver.pro qmf-9999/src/libraries/qmfmessageserver/qmfmessageserver.pro
--- qmf-9999.orig/src/libraries/qmfmessageserver/qmfmessageserver.pro	2011-08-15 02:24:01.891754553 +0200
+++ qmf-9999/src/libraries/qmfmessageserver/qmfmessageserver.pro	2011-08-15 02:24:14.867592333 +0200
@@ -3,7 +3,7 @@
 CONFIG += qmfclient
 TARGET = qmfmessageserver
 
-target.path += $$QMF_INSTALL_ROOT/lib
+target.path += $$[QT_INSTALL_LIBS]
 
 QT = core network
 !contains(DEFINES,QMF_NO_MESSAGE_SERVICE_EDITOR):QT += gui
@@ -48,7 +48,7 @@
            qmailtransport.cpp \
            qmailheartbeattimer_qtimer.cpp # NB: There are multiple implementations
 
-header_files.path=$$QMF_INSTALL_ROOT/include/qmfmessageserver
+header_files.path=$$[QT_INSTALL_HEADERS]/qmfmessageserver
 header_files.files=$$PUBLIC_HEADERS
 
 INSTALLS += header_files
@@ -57,6 +57,6 @@
 	CONFIG += create_pc create_prl
 	QMAKE_PKGCONFIG_LIBDIR  = $$target.path
 	QMAKE_PKGCONFIG_INCDIR  = $$header_files.path
-	QMAKE_PKGCONFIG_DESTDIR = pkgconfig
+	QMAKE_PKGCONFIG_DESTDIR = ../pkgconfig
 }
 include(../../../common.pri)
diff -Naur qmf-9999.orig/src/plugins/contentmanagers/qmfstoragemanager/qmfstoragemanager.pro qmf-9999/src/plugins/contentmanagers/qmfstoragemanager/qmfstoragemanager.pro
--- qmf-9999.orig/src/plugins/contentmanagers/qmfstoragemanager/qmfstoragemanager.pro	2011-08-15 02:24:01.828755340 +0200
+++ qmf-9999/src/plugins/contentmanagers/qmfstoragemanager/qmfstoragemanager.pro	2011-08-15 02:24:14.868592321 +0200
@@ -3,7 +3,7 @@
 CONFIG += qmfclient plugin
 QT = core
 
-target.path += $$QMF_INSTALL_ROOT/plugins/contentmanagers
+target.path += $$[QT_INSTALL_PLUGINS]/contentmanagers
 
 DEFINES += PLUGIN_INTERNAL
 
diff -Naur qmf-9999.orig/src/plugins/messageservices/imap/imap.pro qmf-9999/src/plugins/messageservices/imap/imap.pro
--- qmf-9999.orig/src/plugins/messageservices/imap/imap.pro	2011-08-15 02:24:01.813755528 +0200
+++ qmf-9999/src/plugins/messageservices/imap/imap.pro	2011-08-15 02:24:14.869592309 +0200
@@ -2,7 +2,7 @@
 TARGET = imap 
 CONFIG += qmfmessageserver qmfclient plugin
 
-target.path += $$QMF_INSTALL_ROOT/plugins/messageservices
+target.path += $$[QT_INSTALL_PLUGINS]/messageservices
 
 QT += core network
 
diff -Naur qmf-9999.orig/src/plugins/messageservices/pop/pop.pro qmf-9999/src/plugins/messageservices/pop/pop.pro
--- qmf-9999.orig/src/plugins/messageservices/pop/pop.pro	2011-08-15 02:24:01.824755392 +0200
+++ qmf-9999/src/plugins/messageservices/pop/pop.pro	2011-08-15 02:24:14.870592297 +0200
@@ -2,7 +2,7 @@
 TARGET = pop 
 CONFIG += qmfclient qmfmessageserver plugin
 
-target.path = $$QMF_INSTALL_ROOT/plugins/messageservices
+target.path = $$[QT_INSTALL_PLUGINS]/messageservices
 
 QT = core network
 
diff -Naur qmf-9999.orig/src/plugins/messageservices/qmfsettings/qmfsettings.pro qmf-9999/src/plugins/messageservices/qmfsettings/qmfsettings.pro
--- qmf-9999.orig/src/plugins/messageservices/qmfsettings/qmfsettings.pro	2011-08-15 02:24:01.820755440 +0200
+++ qmf-9999/src/plugins/messageservices/qmfsettings/qmfsettings.pro	2011-08-15 02:24:14.870592297 +0200
@@ -2,7 +2,7 @@
 TARGET = qmfsettings
 CONFIG += qmfclient qmfmessageserver plugin
 
-target.path += $$QMF_INSTALL_ROOT/plugins/messageservices
+target.path += $$[QT_INSTALL_PLUGINS]/messageservices
 
 QT = core network
 
diff -Naur qmf-9999.orig/src/plugins/messageservices/smtp/smtp.pro qmf-9999/src/plugins/messageservices/smtp/smtp.pro
--- qmf-9999.orig/src/plugins/messageservices/smtp/smtp.pro	2011-08-15 02:24:01.819755453 +0200
+++ qmf-9999/src/plugins/messageservices/smtp/smtp.pro	2011-08-15 02:24:14.871592284 +0200
@@ -3,7 +3,7 @@
 
 CONFIG += qmfclient qmfmessageserver plugin
 
-target.path += $$QMF_INSTALL_ROOT/plugins/messageservices
+target.path += $$[QT_INSTALL_PLUGINS]/messageservices
 
 QT = core network
 
diff -Naur qmf-9999.orig/src/tools/messageserver/messageserver.pro qmf-9999/src/tools/messageserver/messageserver.pro
--- qmf-9999.orig/src/tools/messageserver/messageserver.pro	2011-08-15 02:24:01.832755292 +0200
+++ qmf-9999/src/tools/messageserver/messageserver.pro	2011-08-15 02:24:14.872592271 +0200
@@ -14,7 +14,7 @@
 QT = core
 !contains(DEFINES,QMF_NO_MESSAGE_SERVICE_EDITOR):QT += gui
 
-target.path += $$QMF_INSTALL_ROOT/bin
+target.path += $$[QT_INSTALL_BINS]
 
 DEPENDPATH += . 
 
diff -Naur qmf-9999.orig/tests/tests.pri qmf-9999/tests/tests.pri
--- qmf-9999.orig/tests/tests.pri	2011-08-15 02:24:01.769756079 +0200
+++ qmf-9999/tests/tests.pri	2011-08-15 02:25:04.172975930 +0200
@@ -4,14 +4,14 @@
     QMAKE_MACOSX_DEPLOYMENT_TARGET=10.5
 }
 
-target.path+=$$QMF_INSTALL_ROOT/tests
+target.path+=$$[QT_INSTALL_DATA]/tests
 
 QMFPATH=../../src/libraries/qmfclient
 DEPENDPATH += .
 INCLUDEPATH += . $$QMFPATH $$QMFPATH/support
 LIBS += -L$$QMFPATH/build
 macx:LIBS += -F$$QMFPATH/build
-!symbian:QMAKE_LFLAGS += -Wl,-rpath,$$QMFPATH
+!symbian:QMAKE_LFLAGS += -Wl,-rpath,\\\$$ORIGIN/../$$QMFPATH/build
 
 symbian {
     TARGET.CAPABILITY = ReadUserData WriteUserData ReadDeviceData WriteDeviceData
diff -Naur qmf-9999.orig/tests/tests.pro qmf-9999/tests/tests.pro
--- qmf-9999.orig/tests/tests.pro	2011-08-15 02:24:01.776755992 +0200
+++ qmf-9999/tests/tests.pro	2011-08-15 02:24:14.874592245 +0200
@@ -31,6 +31,6 @@
 
 # Install test file description
 test_description.files = tests.xml
-test_description.path  = $$QMF_INSTALL_ROOT/tests
+test_description.path  = $$[QT_INSTALL_DATA]/tests
 
 INSTALLS += test_description
diff -Naur qmf-9999.orig/tests/tst_python_email/tst_python_email.pro qmf-9999/tests/tst_python_email/tst_python_email.pro
--- qmf-9999.orig/tests/tst_python_email/tst_python_email.pro	2011-08-15 02:24:01.786755866 +0200
+++ qmf-9999/tests/tst_python_email/tst_python_email.pro	2011-08-15 02:24:14.874592245 +0200
@@ -5,7 +5,7 @@
 !symbian {
     DEFINES += SRCDIR=\\\"$$_PRO_FILE_PWD_\\\"
 
-    testdata.path = $$QMF_INSTALL_ROOT/tests/testdata
+    testdata.path = $$[QT_INSTALL_DATA]/tests/testdata
     testdata.files = testdata/*
 
     INSTALLS += testdata
